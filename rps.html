<!DOCTYPE html>
<html>
  <script>
  function computerPlay() {
    let rpsArray = ['Rock', 'Paper', 'Scissors'];
    let randomString = rpsArray[Math.floor(Math.random() * rpsArray.length)];
    return randomString;
  }

  function playerPlay() {
    let playerChoice = prompt('Rock, Paper, or Scissors?', '');
    let playerDecision = playerChoice.charAt(0).toUpperCase() + playerChoice.slice(1).toLowerCase();
    if(playerDecision == 'Rock' || playerDecision == 'Paper' || playerDecision == 'Scissors') {
      alert('You have chosen: ' + playerDecision);
      return playerDecision;
    } else if (playerDecision == null || playerDecision == ''){
      alert('Please select Rock, Paper, or Scissor');
      playerPlay();
    } else {
      alert('Please select Rock, Paper, or Scissor');
      playerPlay();
    }
  }

  function playRound (computerSelection, playerSelection) {
    if(computerSelection == playerSelection) {
      console.log('Tie!');
    } else if (computerSelection == 'Rock' && playerSelection == 'Paper') {
      console.log('Player Wins! Paper beats Rock!');
    } else if (computerSelection == 'Paper' && playerSelection == 'Rock'){
      console.log('Computer Wins! Paper Beats Rock!');
    } else if (computerSelection == 'Rock' && playerSelection == 'Scissors'){
      console.log('Computer Wins! Rock beats Scissors!');
    } else if (computerSelection == 'Scissors' && playerSelection == 'Rock') {
      console.log('Player Wins! Rock beats Scissors!');
    }else if (computerSelection == 'Scissors' && playerSelection == 'Paper'){
      console.log("Computer Wins! Scissors beats Paper!");
    } else if(computerSelection == 'Paper' && playerSelection == 'Scissors'){
      console.log("Player Wins! Scissors beats Paper!");
    }
  }

  function game () {
    let playerScore = 0;
    let computerScore = 0;
    let counter = 0;
    while(counter < 5) {
      function playRound (computerSelection, playerSelection) {
        if(computerSelection == playerSelection) {
          console.log('Tie!');
        } else if (computerSelection == 'Rock' && playerSelection == 'Paper') {
          console.log('Player Wins! Paper beats Rock!');
          playerScore++;
          counter++;
        } else if (computerSelection == 'Paper' && playerSelection == 'Rock'){
          console.log('Computer Wins! Paper Beats Rock!');
          computerScore++;
          counter++;
        } else if (computerSelection == 'Rock' && playerSelection == 'Scissors'){
          console.log('Computer Wins! Rock beats Scissors!');
          computerScore++;
          counter++;
        } else if (computerSelection == 'Scissors' && playerSelection == 'Rock') {
          console.log('Player Wins! Rock beats Scissors!');
          playerScore++;
          counter++;
        }else if (computerSelection == 'Scissors' && playerSelection == 'Paper'){
          console.log("Computer Wins! Scissors beats Paper!");
          computerScore++;
          counter++;
        } else if(computerSelection == 'Paper' && playerSelection == 'Scissors'){
          console.log("Player Wins! Scissors beats Paper!");
          playerScore++;
          counter++;
        }
      }
      let playerSelection = playerPlay();
      let computerSelection = computerPlay();
      console.log(playRound(computerSelection, playerSelection));
      console.log('Player Score: ' + playerScore);
      console.log('Computer Score: ' + computerScore);
      if(counter < 5){
        if(playerScore > computerScore) {
          console.log('Player is currently winning!');
        } else if (computerScore > playerScore) {
          console.log('Computer is currently winning!');
        } else if (playerScore == computerScore) {
          console.log('Player and Computer are currently tied!');
        }
      }
      if(playerScore === 3 && computerScore === 0) {
        console.log('End of Game! Player has won!');
        counter += 2;
        resetGame();
      } else if (playerScore === 3 && computerScore === 1) {
        console.log('End of Game! Player has won!');
        counter += 2;
        resetGame();
      } else if (computerScore === 3 && playerScore === 0) {
          console.log('End of Game! Computer has won!');
          counter += 2;
          resetGame();
        } else if (computerScore === 3 && playerScore === 1) {
          console.log('End of Game! Computer has won!');
          counter += 2;
          resetGame();
        }
      if(counter == 5) {
        if(playerScore > computerScore) {
          console.log('End of Game! Player has won!');
          resetGame();
        } else {
          console.log('End of Game! Computer has won!');
          resetGame();
        }
      }
    }
    }
  game();

  function resetGame() {
    computerScore = 0;
    playerScore = 0;
    counter = 0;
    alert('Game is about to be reset!');
    console.clear();
    playerPlay();
    game();
  }
  /*let playerSelection = playerPlay();
  let computerSelection = computerPlay();
  console.log(playRound(computerSelection, playerSelection));*/

  </script>
</html>
